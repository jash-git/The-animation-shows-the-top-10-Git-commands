(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{225:function(e,t,n){"use strict";n.r(t);var r=n(0),o=(n(38),n(1)),c=n.n(o),a=n(9),i=function(e){var t=e.searchTerm,n=e.onSearch,o=e.onSubmitSearch,c=e.searchBoxId;return Object(r.h)("form",{action:"/search",acceptCharset:"UTF-8",method:"get",onSubmit:o},Object(r.h)("input",{name:"utf8",type:"hidden",value:"\u2713"}),Object(r.h)("input",{className:"top-bar--search-input crayons-textfield",type:"text",name:"q",id:c,placeholder:"Search...",autoComplete:"off","aria-label":"search",onKeyDown:n,value:t}))};function u(e){return(u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return!t||"object"!==u(t)&&"function"!==typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}i.propTypes={searchTerm:c.a.string.isRequired,searchBoxId:c.a.string.isRequired,onSearch:c.a.func.isRequired,onSubmitSearch:c.a.func.isRequired};var y=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(y,e);var t,n,o,c,u=(t=y,function(){var e,n=p(t);if(d()){var r=p(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return f(this,e)});function y(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),m(h(t=u.call(this,e)),"enableSearchPageListener",(function(){t.enableSearchPageChecker=!0})),m(h(t),"hasKeyModifiers",(function(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey})),m(h(t),"search",(function(e){var n=e.key,r=e.target.value;t.enableSearchPageChecker=!1,Object(a.d)()&&"Enter"===n&&t.setState({searchTerm:r},(function(){var e=t.state.searchTerm;Object(a.e)({searchTerm:e})}))})),m(h(t),"submit",(function(e){if(a.d){e.preventDefault();var n=t.state.searchTerm;Object(a.a)({searchTerm:n})}})),t.enableSearchPageChecker=!0,t}return n=y,(o=[{key:"componentWillMount",value:function(){var e,t=this;e=this.state.searchTerm,this.setState({searchTerm:Object(a.c)(window.location.search)},(function(){return Object(a.e)({searchTerm:e})})),e=this.state.searchTerm,function n(){t.enableSearchPageChecker&&""!==e&&null===/^http(s)?:\/\/[^/]+\/search/.exec(window.location.href)&&t.setState({searchTerm:""}),setTimeout(n,500)}()}},{key:"componentDidMount",value:function(){this.registerGlobalKeysListener(),InstantClick.on("change",this.enableSearchPageListener)}},{key:"componentDidUnmount",value:function(){document.removeEventListener("keydown",this.globalKeysListener),InstantClick.off("change",this.enableSearchPageListener)}},{key:"registerGlobalKeysListener",value:function(){var e=this,t=this.props.searchBoxId,n=document.getElementById(t);this.globalKeysListener=function(t){var r=document.activeElement,o=r.tagName,c=r.classList;"/"!==t.key&&"0"!==t.key||"INPUT"===o||"TEXTAREA"===o||c.contains("input")||("/"===t.key?(t.preventDefault(),document.getElementsByTagName("body")[0].classList.remove("zen-mode"),n.focus(),n.select()):"0"!==t.key||e.hasKeyModifiers(t)||(t.preventDefault(),document.getElementsByTagName("body")[0].classList.toggle("zen-mode")))},document.addEventListener("keydown",this.globalKeysListener)}},{key:"render",value:function(e,t){var n=e.searchBoxId,o=t.searchTerm,c=void 0===o?"":o;return Object(r.h)(i,{searchTerm:c,onSearch:this.search,onSubmitSearch:this.submit,searchBoxId:n})}}])&&s(n.prototype,o),c&&s(n,c),y}(r.Component);m(y,"defaultProps",{searchBoxId:"nav-search"}),y.propTypes={searchBoxId:c.a.string};n(108);document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("top-bar--search");Object(r.render)(Object(r.h)(y,null),e,e.firstElementChild)}))},9:function(e,t,n){"use strict";function r(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href,n=e.replace(/[[\]]/g,"\\$&"),r=new RegExp("[?&]".concat(n,"(=([^&#]*)|&|#|$)")),o=r.exec(t);return o?o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):"":null}("filters",e);return t?"&filters=".concat(t):""}n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return u})),n.d(t,"b",(function(){return s}));var o=function(){return"undefined"!==typeof instantClick};function c(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16))}))}function a(e){var t=e.searchTerm,n=e.location,o=void 0===n?window.location:n,a=o.origin,i=c(t),u=r(o.href);InstantClick.display("".concat(a,"/search?q=").concat(i).concat(u))}function i(e){var t=/(?:&|\?)?q=([^&=]+)/.exec(e),n=null!==t&&2===t.length?decodeURIComponent(t[1].replace(/\+/g,"%20")):"",r=filterXSS(n),o=document.createElement("div");return o.innerHTML=r,null!==o.firstChild?o.firstChild.nodeValue:r}function u(e){var t=e.searchTerm,n=e.location,o=void 0===n?window.location:n,a=c(t.replace(/^[ ]+|[ ]+$/g,""));InstantClick.preload("".concat(o.origin,"/search?q=").concat(a).concat(r(o.href)))}function s(e,t){var n=function(e){var t=new URLSearchParams;return Object.keys(e).forEach((function(n){var r=e[n];Array.isArray(r)?r.forEach((function(e){t.append("".concat(n,"[]"),e)})):t.append(n,r)})),t.toString()}(t);return fetch("/search/".concat(e,"?").concat(n),{method:"GET",headers:{Accept:"application/json","X-CSRF-Token":window.csrfToken,"Content-Type":"application/json"},credentials:"same-origin"}).then((function(e){return e.json()}))}}},[[225,28,0]]]);
//# sourceMappingURL=Search-f76636c1a49f674ce75d.chunk.js.map